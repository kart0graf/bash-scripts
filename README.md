# bash-scripts
## Введение
Выкладываю полезные скрипты на bash с кратким описанием их работы.
Заранее благодарю всех, кто советами, идеями и кодом помогал в создании скриптов.

## Информация об окружении в котором выполняются скрипты.
На рабочих и домашнем компах установлены xubuntu 18.04, debian 9. 
Для выполнения скриптов предпочитаю bash. 
Если будут использоваться какие то специфические программы я их укажу.

## [Скрипты для работы с изображениями.](https://github.com/kart0graf/bash-scripts/tree/master/work_with_images)
Скрипты для задач конвертацией множества растровых файлов из формата в формат, всевозможные bmp, jpg, djvu, pdf, png. Для конвертации обычно нужен ImageMagick. 
Скрипты по работе с геопривязанными растрами, будут лежать отдельно.

### [BMPtoJPG](https://github.com/kart0graf/bash-scripts/blob/master/work_with_images/BMPtoJPG)
Создает папку JPG в текущей, туда попадают конвертированные из BMP в jpg  файлы. Файлы перебираются  из текущей папки. Могут быть проблемы с пробелами в названиях файлов.

### [jpg2000px](https://github.com/kart0graf/bash-scripts/blob/master/work_with_images/jpg2000px)
Похож на предыдущий скрипт. Создает папку **small** в текущей. Перебирает файлы в формате jpg и уменьшает их до размера в 2000px с качеством 90. 

### [PNGtoJPG](https://github.com/kart0graf/bash-scripts/blob/master/work_with_images/PNGtoJPG)
Подобен **BMPtoJPG**. 

### [convertBMPtoJPG.bat](https://github.com/kart0graf/bash-scripts/blob/master/work_with_images/convertBMPtoJPG.bat)
Этот скрипт сделан для Windows. Тоже требуется установленный imageMagick.
Он ищет файлы bmp в текущей папке и в подпапках, и конвертирует их в jpg. Исходные файлы не удаляются. 

### [optimizeJPGandPNG](https://github.com/kart0graf/bash-scripts/blob/master/work_with_images/optimizeJPGandPNG)

Скрипт посложнее. Служит для оптимизации изображений в формате **jpg** и **png**. Например для размещения на сайте. Кроме **ImageMagick** требуются еще установленные **jpegoptim** и **optipng**. А также **rsync**. 

В файле скрипта можно задать переменные с максимальным размером картинки и качеством сжатия для  **jpg**.

Каталог с картинками должен называться **all**, кладется в текущий. В нем могут быть и другие файлы.

Скрипт создает каталог **output**. Копирует в него файлы форматов **jpg** и **png**, по возможности сохраняет структуру каталогов и права.

Меняет размер файлов, если он больше 1600px. 

Затем оптимизирует файлы для веб.

Дополнительно делаются файлы с отчетам, логом, ошибками.

Комментарии кода есть в самом скрипте.


## [Скрипты для работы с геоданными.](https://github.com/kart0graf/bash-scripts/tree/master/geospatial_scripts)
Скрипты на основе библиотек GDAL/OGR. Предназначены для работы с векторными и растровыми данными имеющими географичскую привязку. 

### [shp2tab](https://github.com/kart0graf/bash-scripts/blob/master/geospatial_scripts/shp2tab)

- Создает каталог TAB.
- Удаляет файл с информацией о проекции, ее можно задать потом, когда будете добавлять в QGIS или Mapinfo. Иначе у MSK66 пропадала часть параметров.
- Конвертируем.

### [mif2tab](https://github.com/kart0graf/bash-scripts/blob/master/geospatial_scripts/mif2tab)

- Создает каталог TAB.
- Конвертируем. 

### [TIFMSK66toTIFTILED2536](https://github.com/kart0graf/bash-scripts/blob/master/geospatial_scripts/TIFMSK66toTIFTILED2536)

Скрипт служит для подготовки новых растров к выгрузке на сервер.

*Поясню некоторые параметры:*

`-s_srs "+proj=tmerc +lat_0=0 +lon_0=60.05 +k=1 +x_0=1500000 +y_0=-5911057.63 +ellps=krass +towgs84=23.92,-141.27,-80.9,-0,0.35,0.82,-0.12 +units=m +no_defs"` - задаем параметры MSK66.

`-t_srs EPSG:2536 ` - задает через код СК, конечную систему координат.

**Описание работы:**

 - создаем каталог TILED, обработанные файлы будут в нем;
 - перебираем файлы;
 - меняем систему координат;
 - создаем тайлы внутри файла TIF;
 - создаем пирамиды;
 - копируем в TILED;
 - подчищаем  временные файлы.









